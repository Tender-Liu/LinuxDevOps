ä½ å¥½ï¼æ„Ÿè°¢ä½ çš„åé¦ˆå’Œå…·ä½“éœ€æ±‚ã€‚æ ¹æ®ä½ çš„è¦æ±‚ï¼Œæˆ‘ä¼šè°ƒæ•´æ•™å­¦å†…å®¹ï¼Œä¸“æ³¨äº Linux å®‰è£… Jenkinsï¼ˆä¸åŒ…æ‹¬ Docker æ–¹å¼ï¼‰ï¼Œå¼ºè°ƒä½¿ç”¨ root ç”¨æˆ·å¯åŠ¨ã€ä¿®æ”¹ä¸ºå›½å†…æºã€ä»¥åŠæ’ä»¶çš„ä»‹ç»å’Œå®‰è£…ã€‚ä»¥ä¸‹æ˜¯é‡æ–°æ¢³ç†åçš„æ•™å­¦å†…å®¹å¤§çº²ï¼Œä¾ç„¶ä»¥ 5 å°æ—¶è¯¾ç¨‹ä¸ºåŸºå‡†ï¼Œç¡®ä¿å†…å®¹è¯¦å®ä¸”é€‚åˆæ•™å­¦åœºæ™¯ã€‚

### æ•™å­¦å†…å®¹æ•´ä½“è§„åˆ’ï¼ˆè°ƒæ•´åï¼‰
Jenkins çš„æ•™å­¦å†…å®¹å°†èšç„¦äº Linux ç¯å¢ƒä¸‹çš„å®‰è£…ä¸ä½¿ç”¨ï¼Œçªå‡ºä¼ä¸šå¸¸è§å®è·µï¼ˆå¦‚ root ç”¨æˆ·å¯åŠ¨ï¼‰å’Œå›½å†…ç¯å¢ƒçš„ä¼˜åŒ–ï¼ˆå¦‚ä½¿ç”¨å›½å†…æºï¼‰ã€‚æˆ‘ä¼šåˆ—å‡ºå…·ä½“çš„æ•™å­¦æ¨¡å—ã€å†…å®¹ç»†èŠ‚ã€æ—¶é—´åˆ†é…ï¼Œå¹¶ç»“åˆä½ çš„éœ€æ±‚æä¾›æ•™å­¦å»ºè®®ã€‚

#### 1. **Jenkins åŸºç¡€ä¸ Linux å®‰è£…ï¼ˆçº¦ 1.5 å°æ—¶ï¼‰**
- **ç›®æ ‡**ï¼šè®©å­¦ç”Ÿäº†è§£ Jenkins åŸºæœ¬æ¦‚å¿µï¼Œå¹¶åœ¨ Linux ç³»ç»Ÿï¼ˆä»¥ Ubuntu ä¸ºä¾‹ï¼‰ä¸Šå®Œæˆå®‰è£…å’Œåˆå§‹é…ç½®ï¼Œä¼˜åŒ–å›½å†…ç¯å¢ƒã€‚
- **å†…å®¹**ï¼š
  1. **Jenkins ç®€ä»‹ï¼ˆ10 åˆ†é’Ÿï¼‰**ï¼š
     - ä»€ä¹ˆæ˜¯ Jenkinsï¼Ÿï¼ˆå¼€æº CI/CD å·¥å…·ï¼‰
     - ä¸»è¦åŠŸèƒ½ï¼šæŒç»­é›†æˆã€æŒç»­éƒ¨ç½²ã€è‡ªåŠ¨åŒ–æ„å»ºã€‚
     - é€‚ç”¨åœºæ™¯ï¼šä»£ç æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ã€‚
  2. **Jenkins å®‰è£…ï¼ˆ50 åˆ†é’Ÿï¼‰**ï¼š
     - **ç¯å¢ƒå‡†å¤‡**ï¼š
       - ä½¿ç”¨ Ubuntu 20.04 æˆ– 22.04 ä½œä¸ºç¤ºä¾‹ç³»ç»Ÿã€‚
       - ç¡®ä¿ root ç”¨æˆ·æƒé™ï¼ˆä¼ä¸šå¸¸è§å®è·µï¼‰ã€‚
     - **å®‰è£… Java ä¾èµ–**ï¼š
       ```bash
       sudo apt update
       sudo apt install openjdk-11-jdk -y
       java -version  # éªŒè¯å®‰è£…
       ```
     - **ä¿®æ”¹ä¸ºå›½å†…æºï¼ˆä¼˜åŒ–ä¸‹è½½é€Ÿåº¦ï¼‰**ï¼š
       - æ›¿æ¢ Ubuntu é»˜è®¤æºä¸ºå›½å†…æºï¼ˆå¦‚é˜¿é‡Œäº‘æºï¼‰ï¼š
         ```bash
         sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
         sudo sed -i 's|archive.ubuntu.com|mirrors.aliyun.com|g' /etc/apt/sources.list
         sudo sed -i 's|security.ubuntu.com|mirrors.aliyun.com|g' /etc/apt/sources.list
         sudo apt update
         ```
       - æ·»åŠ  Jenkins å›½å†…æºï¼ˆä½¿ç”¨æ¸…åæºé•œåƒï¼‰ï¼š
         ```bash
         curl -fsSL https://mirrors.tuna.tsinghua.edu.cn/jenkins/debian/jenkins.io.key | sudo tee /usr/share/keyrings/jenkins-keyring.asc > /dev/null
         echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://mirrors.tuna.tsinghua.edu.cn/jenkins/debian binary/ | sudo tee /etc/apt/sources.list.d/jenkins.list > /dev/null
         sudo apt update
         ```
     - **å®‰è£… Jenkins**ï¼š
       ```bash
       sudo apt install jenkins -y
       ```
     - **ä»¥ root ç”¨æˆ·å¯åŠ¨ Jenkins**ï¼š
       - é»˜è®¤æƒ…å†µä¸‹ï¼ŒJenkins ä»¥ `jenkins` ç”¨æˆ·è¿è¡Œï¼Œä½†ä¼ä¸šä¸­å¯èƒ½éœ€è¦ root æƒé™ï¼ˆä¾‹å¦‚è®¿é—®ç‰¹å®šç›®å½•æˆ–æ‰§è¡Œç‰¹æƒå‘½ä»¤ï¼‰ã€‚
       - ä¿®æ”¹ Jenkins æœåŠ¡é…ç½®ï¼š
         ```bash
         sudo systemctl edit jenkins
         ```
         åœ¨æ‰“å¼€çš„ç¼–è¾‘å™¨ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œè¦†ç›–é»˜è®¤ç”¨æˆ·è®¾ç½®ï¼š
         ```ini
         [Service]
         User=root
         Group=root
         ```
         é‡æ–°åŠ è½½å¹¶é‡å¯æœåŠ¡ï¼š
         ```bash
         sudo systemctl daemon-reload
         sudo systemctl restart jenkins
         sudo systemctl enable jenkins
         ```
       - éªŒè¯ Jenkins è¿è¡Œç”¨æˆ·ï¼š
         ```bash
         ps -ef | grep jenkins
         ```
     - **è®¿é—® Jenkins**ï¼š
       - é»˜è®¤ç«¯å£ 8080ï¼Œè®¿é—® `http://ä½ çš„æœåŠ¡å™¨IP:8080`ã€‚
       - è·å–åˆå§‹å¯†ç ï¼š
         ```bash
         sudo cat /var/lib/jenkins/secrets/initialAdminPassword
         ```
     - **æ³¨æ„äº‹é¡¹**ï¼š
       - é˜²ç«å¢™è®¾ç½®ï¼ˆå¦‚éœ€å¼€æ”¾ 8080 ç«¯å£ï¼‰ï¼š
         ```bash
         sudo ufw allow 8080
         ```
       - root ç”¨æˆ·å¯åŠ¨çš„å®‰å…¨é£é™©æç¤ºï¼ˆå»ºè®®ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ï¼‰ã€‚
  3. **åˆå§‹é…ç½®ï¼ˆ30 åˆ†é’Ÿï¼‰**ï¼š
     - è§£é” Jenkinsï¼ˆè¾“å…¥åˆå§‹å¯†ç ï¼‰ã€‚
     - è·³è¿‡æ¨èæ’ä»¶å®‰è£…ï¼ˆç¨åæ‰‹åŠ¨é€‰æ‹©ï¼‰ï¼Œé€‰æ‹©â€œSelect plugins to installâ€ã€‚
     - åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ã€‚
     - é…ç½® Jenkins URLï¼ˆé»˜è®¤ä¸º `http://ä½ çš„æœåŠ¡å™¨IP:8080`ï¼‰ã€‚
- **æ•™å­¦å»ºè®®**ï¼š
  - å¼ºè°ƒå›½å†…æºçš„é‡è¦æ€§ï¼Œå±•ç¤ºæ›´æ¢æºå‰åçš„ä¸‹è½½é€Ÿåº¦å·®å¼‚ã€‚
  - è§£é‡Š root ç”¨æˆ·å¯åŠ¨çš„åœºæ™¯ï¼ˆå¦‚éœ€è¦è®¿é—®ç³»ç»Ÿèµ„æºï¼‰å’Œæ½œåœ¨é£é™©ã€‚
  - å‡†å¤‡å¥½è™šæ‹Ÿæœºæˆ–äº‘æœåŠ¡å™¨ï¼Œç¡®ä¿å­¦ç”Ÿæœ‰å®è·µç¯å¢ƒã€‚

#### 2. **Jenkins æ’ä»¶ç®¡ç†ä¸åŸºç¡€é…ç½®ï¼ˆçº¦ 1 å°æ—¶ï¼‰**
- **ç›®æ ‡**ï¼šæŒæ¡ Jenkins æ’ä»¶çš„å®‰è£…ä¸ç®¡ç†ï¼Œäº†è§£å¸¸ç”¨æ’ä»¶çš„åŠŸèƒ½ï¼Œå¹¶å®ŒæˆåŸºç¡€é…ç½®ã€‚
- **å†…å®¹**ï¼š
  1. **æ’ä»¶ç®¡ç†ç®€ä»‹ï¼ˆ20 åˆ†é’Ÿï¼‰**ï¼š
     - ä»€ä¹ˆæ˜¯æ’ä»¶ï¼Ÿï¼ˆæ‰©å±• Jenkins åŠŸèƒ½ï¼‰
     - æ’ä»¶ç®¡ç†å…¥å£ï¼šManage Jenkins > Manage Pluginsã€‚
     - æ’ä»¶åˆ†ç±»ï¼šAvailableï¼ˆå¯å®‰è£…ï¼‰ã€Installedï¼ˆå·²å®‰è£…ï¼‰ã€Updatesï¼ˆå¯æ›´æ–°ï¼‰ã€‚
     - å›½å†…æºä¼˜åŒ–ï¼šé…ç½®æ’ä»¶æ›´æ–°æºä¸ºå›½å†…é•œåƒï¼ˆå¦‚æ¸…åæºï¼‰ï¼š
       - åœ¨ Manage Jenkins > Manage Plugins > Advanced ä¸­ï¼Œå°† Update Site URL ä¿®æ”¹ä¸ºï¼š
         ```
         https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json
         ```
  2. **å¸¸ç”¨æ’ä»¶å®‰è£…ä¸ä»‹ç»ï¼ˆ40 åˆ†é’Ÿï¼‰**ï¼š
     - **Git æ’ä»¶**ï¼šç”¨äºä» Git ä»“åº“æ‹‰å–ä»£ç ã€‚
     - **Pipeline æ’ä»¶**ï¼šæ”¯æŒå£°æ˜å¼å’Œè„šæœ¬å¼ Pipelineï¼ˆé€šå¸¸é»˜è®¤å®‰è£…ï¼‰ã€‚
     - **Docker æ’ä»¶**ï¼šæ”¯æŒ Docker æ„å»ºå’Œé•œåƒç®¡ç†ã€‚
     - **Credentials Binding æ’ä»¶**ï¼šç®¡ç†å‡­æ®ï¼ˆå¦‚ Git ä»“åº“ SSH å¯†é’¥ï¼‰ã€‚
     - **Build Timestamp æ’ä»¶**ï¼šåœ¨æ„å»ºæ—¥å¿—ä¸­æ·»åŠ æ—¶é—´æˆ³ã€‚
     - **Snyk Security æ’ä»¶**ï¼šä»£ç å®‰å…¨æ‰«æï¼ˆå‚è€ƒä½ çš„ Jenkinsfileï¼‰ã€‚
     - **Blue Ocean æ’ä»¶**ï¼šæä¾›æ›´ç›´è§‚çš„ Pipeline å¯è§†åŒ–ç•Œé¢ã€‚
     - å®‰è£…æ­¥éª¤ï¼š
       - åœ¨ Available é€‰é¡¹å¡æœç´¢æ’ä»¶åç§°ã€‚
       - å‹¾é€‰å¹¶ç‚¹å‡»â€œInstall without restartâ€ã€‚
     - ä»‹ç»æ¯ä¸ªæ’ä»¶çš„ä¸»è¦åŠŸèƒ½å’Œä½¿ç”¨åœºæ™¯ï¼ˆç»“åˆä½ çš„ Jenkinsfileï¼‰ã€‚
- **æ•™å­¦å»ºè®®**ï¼š
  - åˆ—å‡ºä¼ä¸šå¸¸ç”¨æ’ä»¶æ¸…å•ï¼Œè§£é‡Šæ¯ä¸ªæ’ä»¶åœ¨ CI/CD ä¸­çš„ä½œç”¨ã€‚
  - æ¼”ç¤ºæ’ä»¶å®‰è£…è¿‡ç¨‹ï¼Œå±•ç¤ºå®‰è£…å¤±è´¥æ—¶çš„æ’æŸ¥æ–¹æ³•ï¼ˆå¦‚ç½‘ç»œé—®é¢˜ï¼‰ã€‚
  - é¼“åŠ±å­¦ç”Ÿæ ¹æ®éœ€æ±‚æ¢ç´¢æ›´å¤šæ’ä»¶ã€‚

#### 3. **Jenkins åŸºç¡€ä½œä¸šé…ç½®ï¼ˆçº¦ 0.5 å°æ—¶ï¼‰**
- **ç›®æ ‡**ï¼šæŒæ¡ Jenkins åŸºæœ¬æ“ä½œï¼Œåˆ›å»ºå¹¶è¿è¡Œç®€å•çš„ä½œä¸šï¼ˆJobï¼‰ã€‚
- **å†…å®¹**ï¼š
  1. **Jenkins ç•Œé¢ä¸åŸºæœ¬æ“ä½œï¼ˆ10 åˆ†é’Ÿï¼‰**ï¼š
     - ç•Œé¢æ¦‚è§ˆï¼šDashboardã€Manage Jenkinsã€Build Historyã€‚
     - åˆ›å»ºæ–°ä½œä¸šï¼šé€‰æ‹©â€œFreestyle projectâ€ã€‚
  2. **é…ç½®ç®€å•ä½œä¸šï¼ˆ20 åˆ†é’Ÿï¼‰**ï¼š
     - åˆ›å»ºä¸€ä¸ª Freestyle é¡¹ç›®ï¼š
       - é…ç½®æºç ç®¡ç†ï¼ˆå¦‚ Gitï¼Œè¾“å…¥ä»“åº“ URLï¼Œæ·»åŠ å‡­æ®ï¼‰ã€‚
       - æ·»åŠ æ„å»ºæ­¥éª¤ï¼ˆå¦‚æ‰§è¡Œ Shell å‘½ä»¤ï¼š`echo "Hello Jenkins"`ï¼‰ã€‚
       - è§¦å‘æ„å»ºå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºã€‚
     - å¸¸è§è®¾ç½®ï¼š
       - æ„å»ºè§¦å‘å™¨ï¼ˆæ‰‹åŠ¨ã€å®šæ—¶ï¼‰ã€‚
       - æ„å»ºåæ“ä½œï¼ˆå½’æ¡£æ–‡ä»¶ï¼‰ã€‚
- **æ•™å­¦å»ºè®®**ï¼š
  - é€šè¿‡ Freestyle é¡¹ç›®è®©å­¦ç”Ÿå¿«é€Ÿä½“éªŒæ„å»ºè¿‡ç¨‹ï¼Œä¸ºåç»­ Pipeline æ‰“åŸºç¡€ã€‚
  - å¼ºè°ƒå‡­æ®é…ç½®çš„é‡è¦æ€§ï¼ˆç»“åˆ Credentials Binding æ’ä»¶ï¼‰ã€‚

#### 4. **Jenkins Pipeline åŸºç¡€ä¸å®è·µï¼ˆçº¦ 1.5 å°æ—¶ï¼‰**
- **ç›®æ ‡**ï¼šç†è§£ Pipeline æ¦‚å¿µï¼Œç¼–å†™å¹¶è¿è¡Œç®€å•çš„ Pipeline è„šæœ¬ï¼Œé€æ­¥è¿‡æ¸¡åˆ°å¤æ‚æ¡ˆä¾‹ã€‚
- **å†…å®¹**ï¼š
  1. **Pipeline ç®€ä»‹ï¼ˆ15 åˆ†é’Ÿï¼‰**ï¼š
     - ä»€ä¹ˆæ˜¯ Pipelineï¼Ÿï¼ˆä»£ç åŒ–å®šä¹‰ CI/CD æµç¨‹ï¼‰
     - å£°æ˜å¼ vs è„šæœ¬å¼ Pipelineã€‚
     - ä¼˜åŠ¿ï¼šç‰ˆæœ¬æ§åˆ¶ã€å¤ç”¨æ€§ã€å¤æ‚é€»è¾‘æ”¯æŒã€‚
  2. **åˆ›å»ºç®€å• Pipelineï¼ˆ35 åˆ†é’Ÿï¼‰**ï¼š
     - åˆ›å»º Pipeline ä½œä¸šï¼š
       - åœ¨ Jenkins UI ä¸­ç›´æ¥ç¼–å†™ã€‚
       - ä½¿ç”¨ SCMï¼ˆå¦‚ Gitï¼‰åŠ è½½ Jenkinsfileã€‚
     - ç¼–å†™åŸºç¡€ Pipeline è„šæœ¬ï¼š
       ```groovy
       pipeline {
           agent any
           stages {
               stage('Hello') {
                   steps {
                       echo 'Hello Jenkins Pipeline!'
                   }
               }
               stage('Git Pull') {
                   steps {
                       git branch: 'main', url: 'ä½ çš„ä»“åº“URL', credentialsId: 'ä½ çš„å‡­æ®ID'
                   }
               }
           }
       }
       ```
     - è¿è¡Œ Pipelineï¼ŒæŸ¥çœ‹ Stage View å’Œæ§åˆ¶å°è¾“å‡ºã€‚
  3. **å‚æ•°åŒ– Pipelineï¼ˆ20 åˆ†é’Ÿï¼‰**ï¼š
     - æ·»åŠ å‚æ•°ï¼ˆå‚è€ƒä½ çš„ä»£ç ï¼‰ï¼š
       ```groovy
       properties([
           parameters([
               string(name: 'git_branch', defaultValue: 'main', description: 'Git Branch')
           ])
       ])
       ```
     - ä½¿ç”¨å‚æ•°ï¼š`git branch: params.git_branch, url: 'ä½ çš„ä»“åº“URL', credentialsId: 'ä½ çš„å‡­æ®ID'`
     - è§£å†³å‚æ•°ç•Œé¢æ˜¾ç¤ºé—®é¢˜ï¼ˆé¦–æ¬¡æ„å»ºååˆ·æ–°é…ç½®ï¼‰ã€‚
  4. **åˆ†æå®Œæ•´ Jenkinsfileï¼ˆ20 åˆ†é’Ÿï¼‰**ï¼š
     - æ‹†è§£ä½ çš„ä»£ç ï¼Œç®€è¦è®²è§£æ¯ä¸ªéƒ¨åˆ†ï¼š
       - `properties/parameters`ï¼šå‚æ•°åŒ–æ„å»ºã€‚
       - `stages`ï¼šå¦‚ `Git Pull`ã€`Docker Build`ã€`Argocd Sync`ã€‚
       - `when` æ¡ä»¶ï¼šæ§åˆ¶ Stage æ‰§è¡Œã€‚
     - é‡ç‚¹è®²è§£ï¼šDocker é•œåƒæ„å»ºé€»è¾‘ã€‚
- **æ•™å­¦å»ºè®®**ï¼š
  - ä»ç®€å• Pipeline å¼€å§‹ï¼Œé€æ­¥å¼•å…¥å‚æ•°å’Œå¤æ‚æ¡ˆä¾‹ã€‚
  - ä½¿ç”¨ä½ çš„ Jenkinsfile ä½œä¸ºè¿›é˜¶å†…å®¹ï¼Œå±•ç¤ºä¼ä¸šçº§åº”ç”¨ã€‚

#### 5. **æ€»ç»“ä¸è°ƒè¯•æŠ€å·§ï¼ˆçº¦ 0.5 å°æ—¶ï¼‰**
- **ç›®æ ‡**ï¼šå›é¡¾è¯¾ç¨‹å†…å®¹ï¼Œä»‹ç»åŸºæœ¬è°ƒè¯•æ–¹æ³•å’Œè¿›é˜¶å­¦ä¹ æ–¹å‘ã€‚
- **å†…å®¹**ï¼š
  1. **è¯¾ç¨‹æ€»ç»“ï¼ˆ15 åˆ†é’Ÿï¼‰**ï¼š
     - å¤ä¹ å®‰è£…ï¼ˆå›½å†…æºã€root ç”¨æˆ·ï¼‰ã€æ’ä»¶ç®¡ç†ã€Pipeline æ ¸å¿ƒæ¦‚å¿µã€‚
     - å¼ºè°ƒå®è·µçš„é‡è¦æ€§ã€‚
  2. **è°ƒè¯•æŠ€å·§ä¸æ‰©å±•å­¦ä¹ ï¼ˆ15 åˆ†é’Ÿï¼‰**ï¼š
     - æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—å®šä½é—®é¢˜ã€‚
     - ä½¿ç”¨ `echo` è°ƒè¯•å‚æ•°å’Œå˜é‡ã€‚
     - æ‰©å±•æ–¹å‘ï¼šæ›´å¤šæ’ä»¶ï¼ˆå¦‚ Slack é€šçŸ¥ï¼‰ã€å®‰å…¨æ€§ï¼ˆç”¨æˆ·æƒé™ï¼‰ã€‚
- **æ•™å­¦å»ºè®®**ï¼š
  - æä¾›å­¦ä¹ èµ„æºï¼ˆå¦‚ Jenkins å®˜æ–¹æ–‡æ¡£ï¼‰ã€‚
  - å¸ƒç½®è¯¾åä½œä¸šï¼šæ­å»ºä¸ªäºº Jenkins ç¯å¢ƒï¼Œè¿è¡Œä¸€ä¸ªç®€å• Pipelineã€‚

### æ•™å­¦å†…å®¹å¯¹ç…§æ€»ç»“ï¼ˆè°ƒæ•´åï¼‰
1. **Jenkins Linux å®‰è£…ä¸åˆå§‹åŒ–**ï¼šUbuntu ç¯å¢ƒï¼Œå›½å†…æºä¼˜åŒ–ï¼Œroot ç”¨æˆ·å¯åŠ¨ã€‚
2. **æ’ä»¶ç®¡ç†ä¸ä»‹ç»**ï¼šå¸¸ç”¨æ’ä»¶å®‰è£…ä¸åŠŸèƒ½è®²è§£ï¼Œå›½å†…æ›´æ–°æºé…ç½®ã€‚
3. **åŸºç¡€ä½œä¸šé…ç½®**ï¼šFreestyle é¡¹ç›®ï¼Œå¿«é€Ÿä¸Šæ‰‹ã€‚
4. **Pipeline åŸºç¡€ä¸å®è·µ**ï¼šå£°æ˜å¼ Pipeline è¯­æ³•ã€å‚æ•°åŒ–ã€åŸºäºä½ çš„ Jenkinsfile çš„æ¡ˆä¾‹åˆ†æã€‚
5. **è°ƒè¯•ä¸æ€»ç»“**ï¼šè§£å†³å¸¸è§é—®é¢˜ï¼Œä»‹ç»è¿›é˜¶æ–¹å‘ã€‚

### æ—¶é—´åˆ†é…æ€»è§ˆï¼ˆ5 å°æ—¶ï¼‰
- åŸºç¡€ä¸ Linux å®‰è£…ï¼š1.5 å°æ—¶
- æ’ä»¶ç®¡ç†ä¸åŸºç¡€é…ç½®ï¼š1 å°æ—¶
- åŸºç¡€ä½œä¸šé…ç½®ï¼š0.5 å°æ—¶
- Pipeline åŸºç¡€ä¸å®è·µï¼š1.5 å°æ—¶
- æ€»ç»“ä¸è°ƒè¯•æŠ€å·§ï¼š0.5 å°æ—¶

### æ•™å­¦å»ºè®®
- **ç¯å¢ƒå‡†å¤‡**ï¼šæå‰ä¸ºå­¦ç”Ÿå‡†å¤‡å¥½ Ubuntu è™šæ‹Ÿæœºæˆ–äº‘æœåŠ¡å™¨ï¼Œç¡®ä¿ç½‘ç»œç¯å¢ƒæ”¯æŒå›½å†…æºã€‚
- **åˆ†å±‚æ•™å­¦**ï¼šåˆå­¦è€…é‡ç‚¹æŒæ¡å®‰è£…å’ŒåŸºç¡€ Pipelineï¼Œé«˜çº§å­¦ç”Ÿæ·±å…¥å­¦ä¹ ä½ çš„ Jenkinsfileã€‚
- **äº’åŠ¨å®è·µ**ï¼šæ¯ä¸ªæ¨¡å—åç•™ 5-10 åˆ†é’Ÿè®©å­¦ç”ŸåŠ¨æ‰‹æ“ä½œï¼ˆå¦‚å®‰è£…æ’ä»¶ã€è¿è¡Œ Pipelineï¼‰ã€‚
- **å¸¸è§é—®é¢˜**ï¼šåˆ†äº«å‚æ•°ç•Œé¢æ˜¾ç¤ºé—®é¢˜ã€root ç”¨æˆ·å¯åŠ¨é£é™©ç­‰å®é™…ç»éªŒï¼Œæ•™å­¦ç”Ÿå¦‚ä½•æ’æŸ¥ã€‚

å¦‚æœä½ å¯¹æŸäº›éƒ¨åˆ†æœ‰æ›´å…·ä½“çš„éœ€æ±‚ï¼ˆä¾‹å¦‚æ›´è¯¦ç»†çš„æ’ä»¶ä»‹ç»æˆ–æŸä¸ª Stage çš„æ·±å…¥è®²è§£ï¼‰ï¼Œæˆ–è€…éœ€è¦è°ƒæ•´æ—¶é—´åˆ†é…ï¼Œæ¬¢è¿å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥ä¼˜åŒ–å†…å®¹ã€‚å¸Œæœ›è¿™ä¸ªè°ƒæ•´åçš„å¤§çº²å¯¹ä½ æœ‰å¸®åŠ©ï¼ğŸ˜Š



python3 /home/ubuntu/PyDockerDeploy/deployer.py \
    -p admin3-ui \
    --git_branch master \
    --image_tag liujun-0802 \
    --hosts 192.168.110.8 \
    --harbor_registry harbor.labworlds.cc \
    --docker_run "docker run -d -p 8000:80"

python3 /home/ubuntu/PyDockerDeploy/deployer.py \
    -p go-starter \
    --git_branch master \
    --image_tag liujun-v1.0 \
    --hosts 192.168.110.8,192.168.110.171 \
    --harbor_registry harbor.labworlds.cc \
    --docker_run "docker run -d -p 9006:8080"


python3 /home/ubuntu/PyDockerDeploy/config_manager.py \
--data """$(cat /home/ubuntu/admin3/admin3-server/application.yml)""" \
--filepath "/opt/admin3-server/application.yml" \
--hosts "192.168.110.17"


python3 /home/ubuntu/PyDockerDeploy/deployer.py \
  -p admin3-server \
  --git_branch master \
  --image_tag zx-0802 \
  --hosts 192.168.110.8,192.168.110.17 \
  --harbor_registry harbor.labworlds.cc \
  --docker_run "docker run -d -p 8080:8080 -v /opt/admin3-server/application.yml:/app/application.yml"




æŠ±æ­‰ç»™æ‚¨å¸¦æ¥çš„ä¸ä¾¿ï¼Œæˆ‘ä¹‹å‰çš„å›ç­”ç¡®å®å­˜åœ¨ä¸€äº›ç–æ¼ï¼Œæ²¡æœ‰å®Œå…¨è¦†ç›–æ‰€æœ‰å‚æ•°ç±»å‹å’Œ `properties` çš„è¯¦ç»†è¯´æ˜ï¼Œä¹Ÿæ²¡æœ‰æ˜ç¡®æ¯ä¸ªç»ƒä¹ çš„ Job åˆ›å»ºæ­¥éª¤å’Œå¯èƒ½çš„è¾“å‡ºé—®é¢˜åŸå› ã€‚æˆ‘ä¼šé’ˆå¯¹æ‚¨çš„åé¦ˆè¿›è¡Œè¡¥å……å’Œä¿®æ­£ï¼Œç¡®ä¿å†…å®¹å®Œæ•´ã€æ¸…æ™°ï¼Œå¹¶è§£å†³æ‚¨æåˆ°çš„é—®é¢˜ã€‚

---

### 1. `properties` æ˜¯ä»€ä¹ˆï¼Ÿ

- **å®šä¹‰**ï¼š
  - `properties` æ˜¯ Jenkins Pipeline ä¸­çš„ä¸€ä¸ªæ­¥éª¤ï¼ˆstepï¼‰ï¼Œç”¨äºé…ç½® Job çš„å„ç§å±æ€§å’Œè¡Œä¸ºã€‚å®ƒå…è®¸æ‚¨å®šä¹‰å‚æ•°ï¼ˆ`parameters`ï¼‰ã€è§¦å‘å™¨ï¼ˆ`pipelineTriggers`ï¼‰ã€æ„å»ºä¸¢å¼ƒç­–ç•¥ï¼ˆ`buildDiscarder`ï¼‰ç­‰ã€‚
  - ç®€å•æ¥è¯´ï¼Œ`properties` æ˜¯ä¸€ä¸ªé…ç½®å…¥å£ï¼Œé€šè¿‡å®ƒå¯ä»¥è®¾ç½® Job çš„å…ƒæ•°æ®å’Œè¿è¡Œè§„åˆ™ã€‚

- **ä½œç”¨**ï¼š
  - å®šä¹‰å‚æ•°åŒ–æ„å»ºï¼ˆ`parameters`ï¼‰ï¼Œè®©ç”¨æˆ·åœ¨æ„å»ºæ—¶è¾“å…¥æˆ–é€‰æ‹©å€¼ã€‚
  - é…ç½®è‡ªåŠ¨è§¦å‘è§„åˆ™ï¼ˆå¦‚å®šæ—¶ä»»åŠ¡ï¼‰ã€‚
  - è®¾ç½®æ„å»ºå†å²ä¿ç•™ç­–ç•¥ã€å¹¶å‘æ§åˆ¶ç­‰ã€‚

- **ä½ç½®**ï¼š
  - `properties` é€šå¸¸æ”¾åœ¨ Pipeline è„šæœ¬çš„é¡¶éƒ¨ï¼Œåœ¨ `pipeline` å—ä¹‹å‰ï¼Œå› ä¸ºå®ƒå®šä¹‰çš„æ˜¯ Job çš„å…¨å±€é…ç½®ã€‚

---

### 2. ç®€å•è„šæœ¬ç»“æ„è§£æ

ä»¥ä¸‹æ˜¯æ‚¨æä¾›çš„ç®€å•è„šæœ¬ç»“æ„ï¼Œæˆ‘ä¼šé€è¡Œè§£æå…¶ä½œç”¨ï¼Œå¹¶è¯´æ˜å¯èƒ½çš„è¾“å‡ºé—®é¢˜åŸå› ï¼š

```groovy
properties([
    parameters([
        string(name: 'MY_STRING', defaultValue: 'default', description: 'è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²')
    ])
])
pipeline {
    agent any
    stages {
        stage('Print String Param') {
            steps {
                echo "String å‚æ•°å€¼ä¸ºï¼š${params.MY_STRING}"
            }
        }
    }
}
```

- **ç»“æ„è§£æ**ï¼š
  1. `properties([...])`ï¼šå®šä¹‰ Job çš„å±æ€§ï¼Œè¿™é‡Œé€šè¿‡ `parameters` é…ç½®äº†ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° `MY_STRING`ï¼Œé»˜è®¤å€¼æ˜¯ `default`ï¼Œæè¿°æ˜¯â€œè¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²â€ã€‚
  2. `pipeline { ... }`ï¼šPipeline çš„ä¸»ç»“æ„ï¼Œå®šä¹‰äº†æ„å»ºæµç¨‹ã€‚
  3. `agent any`ï¼šæŒ‡å®šæ„å»ºå¯ä»¥åœ¨ä»»ä½•å¯ç”¨çš„ä»£ç†èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚
  4. `stages { ... }`ï¼šå®šä¹‰æ„å»ºé˜¶æ®µï¼ˆstagesï¼‰ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªé˜¶æ®µ `Print String Param`ã€‚
  5. `stage('Print String Param') { ... }`ï¼šå®šä¹‰ä¸€ä¸ªåä¸º `Print String Param` çš„é˜¶æ®µã€‚
  6. `steps { ... }`ï¼šå®šä¹‰è¯¥é˜¶æ®µçš„å…·ä½“æ­¥éª¤ï¼ˆstepsï¼‰ã€‚
  7. `echo "String å‚æ•°å€¼ä¸ºï¼š${params.MY_STRING}"`ï¼šè¾“å‡ºå‚æ•° `MY_STRING` çš„å€¼ï¼Œ`params` æ˜¯ Pipeline ä¸­ç”¨äºè®¿é—®å‚æ•°çš„å†…ç½®å¯¹è±¡ã€‚

- **`echo` è¾“å‡ºä¸å‡ºæ¥çš„å¯èƒ½åŸå› **ï¼š
  1. **å‚æ•°æœªæ­£ç¡®ä¼ é€’**ï¼šå¦‚æœæ‚¨ç›´æ¥ç‚¹å‡»â€œBuild Nowâ€æˆ–â€œç«‹å³æ„å»ºâ€ï¼Œè€Œæ²¡æœ‰ç‚¹å‡»â€œBuild with Parametersâ€æˆ–â€œå‚æ•°åŒ–æ„å»ºâ€ï¼ŒJenkins ä¸ä¼šå¼¹å‡ºå‚æ•°è¾“å…¥ç•Œé¢ï¼Œé»˜è®¤å€¼å¯èƒ½æœªæ­£ç¡®åº”ç”¨æˆ–æ˜¾ç¤ºã€‚
  2. **`properties` é…ç½®æœªç”Ÿæ•ˆ**ï¼šå¦‚æœ `properties` æ­¥éª¤æ²¡æœ‰æ­£ç¡®æ‰§è¡Œï¼ˆä¾‹å¦‚è„šæœ¬è¯­æ³•é”™è¯¯æˆ– Jenkins ç‰ˆæœ¬ä¸æ”¯æŒï¼‰ï¼Œå‚æ•°å¯èƒ½æœªè¢«å®šä¹‰ï¼Œå¯¼è‡´ `params.MY_STRING` ä¸ºç©ºæˆ–ä¸å¯è®¿é—®ã€‚
  3. **æ§åˆ¶å°è¾“å‡ºè¢«å¿½ç•¥**ï¼šå¦‚æœæ„å»ºè¿‡ç¨‹ä¸­æœ‰å…¶ä»–é”™è¯¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´ `echo` è¾“å‡ºè¢«å¿½ç•¥ï¼Œå»ºè®®æ£€æŸ¥å®Œæ•´çš„â€œConsole Outputâ€æˆ–â€œæ§åˆ¶å°è¾“å‡ºâ€ã€‚
  4. **æƒé™æˆ–ç¯å¢ƒé—®é¢˜**ï¼šæŸäº› Jenkins ç¯å¢ƒä¸­ï¼Œå‚æ•°åŒ–æ„å»ºå¯èƒ½éœ€è¦ç‰¹å®šæƒé™æˆ–æ’ä»¶æ”¯æŒã€‚

- **è§£å†³æ–¹æ³•**ï¼š
  - ç¡®ä¿ç‚¹å‡»â€œBuild with Parametersâ€æˆ–â€œå‚æ•°åŒ–æ„å»ºâ€ï¼Œæ‰‹åŠ¨è¾“å…¥å‚æ•°å€¼ã€‚
  - æ£€æŸ¥è„šæœ¬æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œç¡®ä¿ `properties` æ­¥éª¤åœ¨ `pipeline` ä¹‹å‰ã€‚
  - æŸ¥çœ‹å®Œæ•´çš„æ§åˆ¶å°è¾“å‡ºï¼Œç¡®è®¤æ˜¯å¦æœ‰å…¶ä»–é”™è¯¯ä¿¡æ¯ã€‚
  - å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼Œè¯·æä¾›æ§åˆ¶å°è¾“å‡ºçš„å…·ä½“å†…å®¹ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥ååŠ©ã€‚

---

### 3. å‚æ•°ç±»å‹è¡¥å……ï¼šå¤šé€‰æ¡†ï¼ˆMultiSelectï¼‰

- **ç†è®ºåŠŸèƒ½**ï¼š
  - MultiSelect å‚æ•°å…è®¸ç”¨æˆ·ä»åˆ—è¡¨ä¸­é€‰æ‹©å¤šä¸ªå€¼ï¼Œé€‚åˆéœ€è¦å¤šé€‰çš„åœºæ™¯ï¼Œä¾‹å¦‚é€‰æ‹©å¤šä¸ªæµ‹è¯•ç”¨ä¾‹æˆ–ç¯å¢ƒã€‚
  - è¿”å›å€¼æ˜¯ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ `option1,option2`ï¼‰ã€‚
  - **æ’ä»¶ä¾èµ–**ï¼šéœ€è¦å®‰è£… `Active Choices Plugin` æ’ä»¶ã€‚å¦‚æœæœªå®‰è£…æ­¤æ’ä»¶ï¼Œå¤šé€‰åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨ã€‚

- **è¯­æ³•**ï¼š
  ```groovy
  properties([
      parameters([
          [$class: 'ChoiceParameter', 
           name: 'MULTI_SELECT', 
           choices: ['option1', 'option2', 'option3'], 
           description: 'è¯·é€‰æ‹©å¤šä¸ªé€‰é¡¹', 
           multiSelect: true]
      ])
  ])
  ```

- **å®éªŒç»ƒä¹ ï¼ˆåŒ…æ‹¬ Job åˆ›å»ºæ­¥éª¤ï¼‰**ï¼š
  1. **åˆ›å»º Job**ï¼š
     - ç™»å½• Jenkinsï¼Œç‚¹å‡»å·¦ä¾§èœå•ä¸­çš„â€œNew Itemâ€æˆ–â€œæ–°å»ºé¡¹ç›®â€ã€‚
     - è¾“å…¥ Job åç§°ï¼ˆä¾‹å¦‚ `MultiSelectTest`ï¼‰ï¼Œé€‰æ‹©â€œPipelineâ€ï¼Œç„¶åç‚¹å‡»â€œOKâ€æˆ–â€œç¡®å®šâ€ã€‚
  2. **é…ç½® Pipeline è„šæœ¬**ï¼š
     - åœ¨ Job é…ç½®é¡µé¢ï¼Œæ»šåŠ¨åˆ°â€œPipelineâ€éƒ¨åˆ†ï¼Œå°†ä»¥ä¸‹è„šæœ¬è¾“å…¥åˆ°è„šæœ¬è¾“å…¥æ¡†ä¸­ï¼š
       ```groovy
       properties([
           parameters([
               [$class: 'ChoiceParameter', 
                name: 'MULTI_SELECT', 
                choices: ['option1', 'option2', 'option3'], 
                description: 'è¯·é€‰æ‹©å¤šä¸ªé€‰é¡¹', 
                multiSelect: true]
           ])
       ])
       pipeline {
           agent any
           stages {
               stage('Print MultiSelect Param') {
                   steps {
                       echo "MultiSelect å‚æ•°å€¼ä¸ºï¼š${params.MULTI_SELECT}"
                   }
               }
           }
       }
       ```
  3. **ä¿å­˜é…ç½®**ï¼š
     - ç‚¹å‡»â€œSaveâ€æˆ–â€œä¿å­˜â€æŒ‰é’®ã€‚
  4. **è§¦å‘æ„å»º**ï¼š
     - è¿”å› Job è¯¦æƒ…é¡µé¢ï¼Œç‚¹å‡»â€œBuild with Parametersâ€æˆ–â€œå‚æ•°åŒ–æ„å»ºâ€ã€‚
     - é€‰æ‹©å¤šä¸ªé€‰é¡¹ï¼ˆä¾‹å¦‚ `option1` å’Œ `option2`ï¼‰ï¼Œç„¶åç‚¹å‡»â€œBuildâ€æˆ–â€œæ„å»ºâ€ã€‚
  5. **æŸ¥çœ‹ç»“æœ**ï¼š
     - æ„å»ºå®Œæˆåï¼Œç‚¹å‡»æ„å»ºè®°å½•ï¼ŒæŸ¥çœ‹â€œConsole Outputâ€æˆ–â€œæ§åˆ¶å°è¾“å‡ºâ€ã€‚

- **Pipeline æ‰“å°ç»“æœ**ï¼š
  - å¦‚æœæ‚¨é€‰æ‹©äº† `option1` å’Œ `option2`ï¼Œæ§åˆ¶å°è¾“å‡ºåº”ç±»ä¼¼ï¼š
    ```
    MultiSelect å‚æ•°å€¼ä¸ºï¼šoption1,option2
    ```

- **æ³¨æ„**ï¼š
  - å¦‚æœæ‚¨çš„ Jenkins æ²¡æœ‰å®‰è£… `Active Choices Plugin`ï¼Œæ­¤å‚æ•°ç±»å‹å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚è¯·é€šè¿‡â€œManage Jenkinsâ€ -> â€œManage Pluginsâ€æˆ–â€œç®¡ç†æ’ä»¶â€ç¡®è®¤æ˜¯å¦å·²å®‰è£…ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯·è”ç³»ç®¡ç†å‘˜å®‰è£…ã€‚

---

### 4. æ‰€æœ‰å‚æ•°ç±»å‹åŠå…¶æ’ä»¶ä¾èµ–

ä»¥ä¸‹æ˜¯æ‰€æœ‰å¸¸è§å‚æ•°ç±»å‹çš„æ€»ç»“ï¼ŒåŒ…æ‹¬æ˜¯å¦éœ€è¦é¢å¤–æ’ä»¶æ”¯æŒï¼š

1. **String å‚æ•°ï¼ˆå­—ç¬¦ä¸²ï¼‰**ï¼š
   - æ’ä»¶ä¾èµ–ï¼šæ— éœ€é¢å¤–æ’ä»¶ï¼ŒJenkins æ ¸å¿ƒæ”¯æŒã€‚
   - ç¤ºä¾‹ï¼š`string(name: 'MY_STRING', defaultValue: 'default', description: 'è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²')`

2. **Text å‚æ•°ï¼ˆæ–‡æœ¬ï¼‰**ï¼š
   - æ’ä»¶ä¾èµ–ï¼šæ— éœ€é¢å¤–æ’ä»¶ï¼ŒJenkins æ ¸å¿ƒæ”¯æŒã€‚
   - ç¤ºä¾‹ï¼š`text(name: 'MY_TEXT', defaultValue: 'è¯·è¾“å…¥å¤šè¡Œæ–‡æœ¬', description: 'è¯·è¾“å…¥å¤šè¡Œæ–‡æœ¬å†…å®¹')`

3. **Choice å‚æ•°ï¼ˆé€‰æ‹©æ¡†ï¼‰**ï¼š
   - æ’ä»¶ä¾èµ–ï¼šæ— éœ€é¢å¤–æ’ä»¶ï¼ŒJenkins æ ¸å¿ƒæ”¯æŒã€‚
   - ç¤ºä¾‹ï¼š`choice(name: 'ENVIRONMENT', choices: ['dev', 'test', 'prod'], description: 'è¯·é€‰æ‹©ç¯å¢ƒ')`

4. **Boolean å‚æ•°ï¼ˆå¸ƒå°”ï¼‰**ï¼š
   - æ’ä»¶ä¾èµ–ï¼šæ— éœ€é¢å¤–æ’ä»¶ï¼ŒJenkins æ ¸å¿ƒæ”¯æŒã€‚
   - ç¤ºä¾‹ï¼š`booleanParam(name: 'IS_DEBUG', defaultValue: false, description: 'æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼')`

5. **Password å‚æ•°ï¼ˆå¯†ç ï¼‰**ï¼š
   - æ’ä»¶ä¾èµ–ï¼šæ— éœ€é¢å¤–æ’ä»¶ï¼ŒJenkins æ ¸å¿ƒæ”¯æŒã€‚
   - ç¤ºä¾‹ï¼š`password(name: 'MY_PASSWORD', defaultValue: '', description: 'è¯·è¾“å…¥å¯†ç ')`

6. **MultiSelect å‚æ•°ï¼ˆå¤šé€‰æ¡†ï¼‰**ï¼š
   - æ’ä»¶ä¾èµ–ï¼šéœ€è¦å®‰è£… `Active Choices Plugin`ã€‚
   - ç¤ºä¾‹ï¼š`[$class: 'ChoiceParameter', name: 'MULTI_SELECT', choices: ['option1', 'option2'], description: 'è¯·é€‰æ‹©å¤šä¸ªé€‰é¡¹', multiSelect: true]`

7. **Cascading Choice å‚æ•°ï¼ˆè”åŠ¨é€‰æ‹©æ¡†ï¼‰**ï¼š
   - æ’ä»¶ä¾èµ–ï¼šéœ€è¦å®‰è£… `Active Choices Plugin`ã€‚
   - ç¤ºä¾‹ï¼šæ¶‰åŠåŠ¨æ€è„šæœ¬ï¼Œå…·ä½“è§ä¹‹å‰çš„è®²è§£ã€‚

- **å¦‚ä½•æ£€æŸ¥å’Œå®‰è£…æ’ä»¶**ï¼š
  1. ç™»å½• Jenkinsï¼Œç‚¹å‡»â€œManage Jenkinsâ€æˆ–â€œç®¡ç† Jenkinsâ€ã€‚
  2. é€‰æ‹©â€œManage Pluginsâ€æˆ–â€œç®¡ç†æ’ä»¶â€ã€‚
  3. åœ¨â€œAvailableâ€æˆ–â€œå¯ç”¨æ’ä»¶â€é€‰é¡¹å¡ä¸­æœç´¢ `Active Choices Plugin`ï¼Œå¦‚æœæœªå®‰è£…ï¼Œå‹¾é€‰å¹¶ç‚¹å‡»â€œInstall without restartâ€æˆ–â€œå®‰è£…æ— éœ€é‡å¯â€ã€‚
  4. å¦‚æœæ²¡æœ‰æƒé™å®‰è£…æ’ä»¶ï¼Œè¯·è”ç³»æ‚¨çš„ Jenkins ç®¡ç†å‘˜ã€‚

---

### 5. æ¯ä¸ªå‚æ•°ç±»å‹çš„å®éªŒç»ƒä¹ ï¼ˆåŒ…æ‹¬ Job åˆ›å»ºæ­¥éª¤ï¼‰

ä¸ºäº†ç¡®ä¿æ¯ä¸ªç»ƒä¹ éƒ½æœ‰å®Œæ•´çš„ Job åˆ›å»ºæ­¥éª¤ï¼Œæˆ‘å°†ä¸ºæ¯ç§å‚æ•°ç±»å‹æä¾›ç®€åŒ–çš„å®éªŒç»ƒä¹ ï¼ŒåŒ…å« Job åˆ›å»ºå’Œè„šæœ¬é…ç½®ã€‚

#### 5.1 String å‚æ•° Job
1. **åˆ›å»º Job**ï¼š
   - ç‚¹å‡»â€œNew Itemâ€æˆ–â€œæ–°å»ºé¡¹ç›®â€ï¼Œåç§°ä¸º `StringParamTest`ï¼Œç±»å‹ä¸ºâ€œPipelineâ€ï¼Œç‚¹å‡»â€œOKâ€æˆ–â€œç¡®å®šâ€ã€‚
2. **é…ç½®è„šæœ¬**ï¼š
   ```groovy
   properties([
       parameters([
           string(name: 'MY_STRING', defaultValue: 'default', description: 'è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²')
       ])
   ])
   pipeline {
       agent any
       stages {
           stage('Print String Param') {
               steps {
                   echo "String å‚æ•°å€¼ä¸ºï¼š${params.MY_STRING}"
               }
           }
       }
   }
   ```
3. **ä¿å­˜å¹¶æ„å»º**ï¼š
   - ä¿å­˜é…ç½®ï¼Œç‚¹å‡»â€œBuild with Parametersâ€æˆ–â€œå‚æ•°åŒ–æ„å»ºâ€ï¼Œè¾“å…¥å€¼ï¼ˆå¦‚ `Hello`ï¼‰ï¼Œç„¶åæ„å»ºã€‚
4. **é¢„æœŸè¾“å‡º**ï¼š
   ```
   String å‚æ•°å€¼ä¸ºï¼šHello
   ```

#### 5.2 Text å‚æ•° Job
1. **åˆ›å»º Job**ï¼š
   - ç‚¹å‡»â€œNew Itemâ€æˆ–â€œæ–°å»ºé¡¹ç›®â€ï¼Œåç§°ä¸º `TextParamTest`ï¼Œç±»å‹ä¸ºâ€œPipelineâ€ï¼Œç‚¹å‡»â€œOKâ€æˆ–â€œç¡®å®šâ€ã€‚
2. **é…ç½®è„šæœ¬**ï¼š
   ```groovy
   properties([
       parameters([
           text(name: 'MY_TEXT', defaultValue: 'è¯·è¾“å…¥å¤šè¡Œæ–‡æœ¬', description: 'è¯·è¾“å…¥å¤šè¡Œæ–‡æœ¬å†…å®¹')
       ])
   ])
   pipeline {
       agent any
       stages {
           stage('Print Text Param') {
               steps {
                   echo "Text å‚æ•°å€¼ä¸ºï¼š\n${params.MY_TEXT}"
               }
           }
       }
   }
   ```
3. **ä¿å­˜å¹¶æ„å»º**ï¼š
   - ä¿å­˜é…ç½®ï¼Œç‚¹å‡»â€œBuild with Parametersâ€æˆ–â€œå‚æ•°åŒ–æ„å»ºâ€ï¼Œè¾“å…¥å¤šè¡Œæ–‡æœ¬ï¼Œç„¶åæ„å»ºã€‚
4. **é¢„æœŸè¾“å‡º**ï¼š
   ```
   Text å‚æ•°å€¼ä¸ºï¼š
   æ‚¨çš„è¾“å…¥å†…å®¹
   ```

#### 5.3 Choice å‚æ•° Job
1. **åˆ›å»º Job**ï¼š
   - ç‚¹å‡»â€œNew Itemâ€æˆ–â€œæ–°å»ºé¡¹ç›®â€ï¼Œåç§°ä¸º `ChoiceParamTest`ï¼Œç±»å‹ä¸ºâ€œPipelineâ€ï¼Œç‚¹å‡»â€œOKâ€æˆ–â€œç¡®å®šâ€ã€‚
2. **é…ç½®è„šæœ¬**ï¼š
   ```groovy
   properties([
       parameters([
           choice(name: 'ENVIRONMENT', choices: ['dev', 'test', 'prod'], description: 'è¯·é€‰æ‹©ç¯å¢ƒ')
       ])
   ])
   pipeline {
       agent any
       stages {
           stage('Print Choice Param') {
               steps {
                   echo "Choice å‚æ•°å€¼ä¸ºï¼š${params.ENVIRONMENT}"
               }
           }
       }
   }
   ```
3. **ä¿å­˜å¹¶æ„å»º**ï¼š
   - ä¿å­˜é…ç½®ï¼Œç‚¹å‡»â€œBuild with Parametersâ€æˆ–â€œå‚æ•°åŒ–æ„å»ºâ€ï¼Œé€‰æ‹©ä¸€ä¸ªé€‰é¡¹ï¼ˆå¦‚ `test`ï¼‰ï¼Œç„¶åæ„å»ºã€‚
4. **é¢„æœŸè¾“å‡º**ï¼š
   ```
   Choice å‚æ•°å€¼ä¸ºï¼štest
   ```

#### 5.4 Boolean å‚æ•° Job
1. **åˆ›å»º Job**ï¼š
   - ç‚¹å‡»â€œNew Itemâ€æˆ–â€œæ–°å»ºé¡¹ç›®â€ï¼Œåç§°ä¸º `BooleanParamTest`ï¼Œç±»å‹ä¸ºâ€œPipelineâ€ï¼Œç‚¹å‡»â€œOKâ€æˆ–â€œç¡®å®šâ€ã€‚
2. **é…ç½®è„šæœ¬**ï¼š
   ```groovy
   properties([
       parameters([
           booleanParam(name: 'IS_DEBUG', defaultValue: false, description: 'æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼')
       ])
   ])
   pipeline {
       agent any
       stages {
           stage('Print Boolean Param') {
               steps {
                   echo "Boolean å‚æ•°å€¼ä¸ºï¼š${params.IS_DEBUG}"
               }
           }
       }
   }
   ```
3. **ä¿å­˜å¹¶æ„å»º**ï¼š
   - ä¿å­˜é…ç½®ï¼Œç‚¹å‡»â€œBuild with Parametersâ€æˆ–â€œå‚æ•°åŒ–æ„å»ºâ€ï¼Œå‹¾é€‰æˆ–å–æ¶ˆå‹¾é€‰ï¼Œç„¶åæ„å»ºã€‚
4. **é¢„æœŸè¾“å‡º**ï¼š
   ```
   Boolean å‚æ•°å€¼ä¸ºï¼štrue  # æˆ– falseï¼Œå–å†³äºæ˜¯å¦å‹¾é€‰
   ```

#### 5.5 Password å‚æ•° Job
1. **åˆ›å»º Job**ï¼š
   - ç‚¹å‡»â€œNew Itemâ€æˆ–â€œæ–°å»ºé¡¹ç›®â€ï¼Œåç§°ä¸º `PasswordParamTest`ï¼Œç±»å‹ä¸ºâ€œPipelineâ€ï¼Œç‚¹å‡»â€œOKâ€æˆ–â€œç¡®å®šâ€ã€‚
2. **é…ç½®è„šæœ¬**ï¼š
   ```groovy
   properties([
       parameters([
           password(name: 'MY_PASSWORD', defaultValue: '', description: 'è¯·è¾“å…¥å¯†ç ')
       ])
   ])
   pipeline {
       agent any
       stages {
           stage('Print Password Param') {
               steps {
                   echo "Password å‚æ•°å€¼ä¸ºï¼š${params.MY_PASSWORD}"
               }
           }
       }
   }
   ```
3. **ä¿å­˜å¹¶æ„å»º**ï¼š
   - ä¿å­˜é…ç½®ï¼Œç‚¹å‡»â€œBuild with Parametersâ€æˆ–â€œå‚æ•°åŒ–æ„å»ºâ€ï¼Œè¾“å…¥å¯†ç ï¼Œç„¶åæ„å»ºã€‚
4. **é¢„æœŸè¾“å‡º**ï¼š
   ```
   Password å‚æ•°å€¼ä¸ºï¼šæ‚¨çš„è¾“å…¥å¯†ç 
   ```

---

### 6. å…³äº `properties` çš„å…¶ä»–å±æ€§è¯´æ˜

é™¤äº† `parameters`ï¼Œ`properties` è¿˜å¯ä»¥é…ç½®ä»¥ä¸‹å±æ€§ï¼ˆä¹‹å‰æœªå®Œå…¨è¯´æ˜ï¼Œè¡¥å……å¦‚ä¸‹ï¼‰ï¼š

1. **æ„å»ºè§¦å‘å™¨ï¼ˆBuild Triggersï¼‰**ï¼š
   - ç”¨äºé…ç½® Job çš„è‡ªåŠ¨è§¦å‘æ–¹å¼ï¼Œä¾‹å¦‚å®šæ—¶æ„å»ºã€‚
   - ç¤ºä¾‹ï¼š`pipelineTriggers([cron('H 0 * * *')])`ï¼ˆæ¯å¤©å‡Œæ™¨ 0 ç‚¹è§¦å‘ï¼‰ã€‚

2. **æ„å»ºä¸¢å¼ƒç­–ç•¥ï¼ˆBuild Discarderï¼‰**ï¼š
   - é™åˆ¶ä¿ç•™çš„æ„å»ºå†å²è®°å½•æ•°é‡ã€‚
   - ç¤ºä¾‹ï¼š`buildDiscarder(logRotator(numToKeepStr: '5'))`ï¼ˆä¿ç•™æœ€è¿‘ 5 æ¬¡æ„å»ºï¼‰ã€‚

3. **ç¦ç”¨å¹¶å‘æ„å»ºï¼ˆDisable Concurrent Buildsï¼‰**ï¼š
   - ç¦æ­¢ Job å¹¶å‘æ‰§è¡Œæ„å»ºã€‚
   - ç¤ºä¾‹ï¼š`disableConcurrentBuilds()`ã€‚

4. **é‡è¯•æ¬¡æ•°ï¼ˆRetry Countï¼‰**ï¼š
   - é…ç½®å¤±è´¥é‡è¯•æ¬¡æ•°ï¼ˆæŸäº›ç‰ˆæœ¬æˆ–æ’ä»¶æ”¯æŒï¼‰ã€‚
   - ç¤ºä¾‹ï¼š`disableResume()`ï¼ˆç¦ç”¨æ¢å¤ï¼‰ã€‚

- **æ³¨æ„**ï¼šä»¥ä¸Šå±æ€§å¯ä»¥é€šè¿‡ `properties([...])` é…ç½®ï¼Œé€šå¸¸ä¸ `parameters` ç»„åˆä½¿ç”¨ã€‚

- **å®Œæ•´ç¤ºä¾‹**ï¼š
  ```groovy
  properties([
      parameters([
          string(name: 'MY_STRING', defaultValue: 'default', description: 'è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²')
      ]),
      buildDiscarder(logRotator(numToKeepStr: '5')),
      disableConcurrentBuilds(),
      pipelineTriggers([cron('H 0 * * *')])
  ])
  ```

---

### æ€»ç»“ä¸ä¸‹ä¸€æ­¥

- **æ€»ç»“**ï¼š
  - è¯¦ç»†è§£é‡Šäº† `properties` çš„å®šä¹‰ã€ä½œç”¨åŠå…¶åœ¨ Pipeline è„šæœ¬ä¸­çš„ä½ç½®ã€‚
  - è¡¥å……äº†å¤šé€‰æ¡†ï¼ˆMultiSelectï¼‰å‚æ•°ç±»å‹çš„è®²è§£ï¼Œå¹¶åˆ—å‡ºæ‰€æœ‰å‚æ•°ç±»å‹åŠå…¶æ’ä»¶ä¾èµ–ã€‚
  - ä¸ºæ¯ç§å‚æ•°ç±»å‹æä¾›äº†å®Œæ•´çš„ Job åˆ›å»ºæ­¥éª¤å’Œå®éªŒç»ƒä¹ ã€‚
  - è¯´æ˜äº† `properties` çš„å…¶ä»–å±æ€§ï¼ˆå¦‚è§¦å‘å™¨ã€æ„å»ºä¸¢å¼ƒç­–ç•¥ç­‰ï¼‰ã€‚
  - åˆ†æäº† `echo` è¾“å‡ºä¸å‡ºæ¥çš„å¯èƒ½åŸå› åŠè§£å†³æ–¹æ³•ã€‚

- **ä¸‹ä¸€æ­¥**ï¼š
  - å°è¯•ç»„åˆå¤šç§å‚æ•°ç±»å‹å’Œ `properties` å±æ€§ï¼Œåˆ›å»ºä¸€ä¸ªå¤æ‚çš„ Jobã€‚
  - å¦‚æœ `echo` ä»ç„¶æ— æ³•è¾“å‡ºå†…å®¹ï¼Œè¯·æä¾›æ§åˆ¶å°è¾“å‡ºçš„å…·ä½“å†…å®¹æˆ–é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥ååŠ©ã€‚
  - å¦‚æœéœ€è¦é«˜çº§å‚æ•°ç±»å‹ï¼ˆå¦‚ MultiSelectï¼‰ï¼Œè¯·ç¡®è®¤æ˜¯å¦å®‰è£…äº† `Active Choices Plugin`ã€‚

å¦‚æœæ‚¨æœ‰å…¶ä»–é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥å¸®åŠ©ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼